# Default server configuration
#
server {
	# SSL configuration
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
    	ssl_certificate /etc/letsencrypt/live/app.104.197.67.49.nip.io/fullchain.pem; # managed by Certbot
    	ssl_certificate_key /etc/letsencrypt/live/app.104.197.67.49.nip.io/privkey.pem; # managed by Certbot

	
	location ^~/templates/
	{
		autoindex on;
		alias /var/Project06/templates/;
		include /etc/nginx/mime.types;
	}
	#
	# Note: You should disable gzip for SSL traffic.
	# See: https://bugs.debian.org/773332
	#
	# Read up on ssl_ciphers to ensure a secure configuration.
	# See: https://bugs.debian.org/765782
	#
	# Self signed certs generated by the ssl-cert package
	# Don't use them in a production server!
	#
	# include snippets/snakeoil.conf;

	root /Project06/;

	# Add index.php to the list if you are using PHP
	#index index.html index.htm index.nginx-debian.html;

	server_name app.104.197.67.49.nip.io;
	 location / {
            include         uwsgi_params;
            uwsgi_pass      unix:/Project06/my_app.sock;

	    proxy_set_header Host $host;
	    proxy_set_header X-Real-IP $remote_addr;
	    proxy_set_header X-Real-Port $remote_addr;
	    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	    proxy_set_header X-Forwarded-Host $host;
	    proxy_set_header X-Forwarded-Port $server_port;
	    proxy_set_header X-Forwarded-Ssl $host;
	    uwsgi_param QUERY_STRING $query_string;
	    uwsgi_param REQUEST_METHOD $request_method;
	    uwsgi_param CONTENT_TYPE $content_type;
	    uwsgi_param CONTENT_LENGTH $content_length;
	    uwsgi_param REQUEST_URI $request_uri;
	    uwsgi_param PATH_INFO $document_uri;
	    uwsgi_param DOCUMENT_ROOT $document_root;
	    uwsgi_param SERVER_PROTOCOL $server_protocol;
	    uwsgi_param HTTPS $https if_not_empty;
	    uwsgi_param REMOTE_ADDR $remote_addr;
	    uwsgi_param REMOTE_PORT $remote_port;
	    uwsgi_param SERVER_PORT $server_port;
	    uwsgi_param SERVER_NAME $server_name;
	    uwsgi_ignore_client_abort on;
	}
}
